<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>root@benedii:~</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- THEME DEFINITIONS --- */
        
        /* Default: Dracula */
        :root {
            --bg: #282a36;
            --curr-line: #44475a;
            --fg: #f8f8f2;
            --comment: #6272a4;
            --cyan: #8be9fd;
            --green: #50fa7b;
            --orange: #ffb86c;
            --pink: #ff79c6;
            --purple: #bd93f9;
            --red: #ff5555;
            --yellow: #f1fa8c;
            --term-padding: 1rem;
            --font-main: 'JetBrains Mono', monospace;
        }

        /* Matrix / Phosphor (Hidden Mode) */
        [data-theme="hacker"] {
            --bg: #050505;
            --curr-line: #111;
            --fg: #00ff41;
            --comment: #008f11;
            --cyan: #00ff41;
            --green: #00ff41;
            --orange: #00ff41;
            --pink: #ccffcc; 
            --purple: #00ff41;
            --red: #ff3333; 
            --yellow: #00ff41;
            text-shadow: 0 0 3px rgba(0, 255, 65, 0.5); 
        }
        [data-theme="hacker"] .file-preview {
             background-color: rgba(0, 255, 65, 0.02);
             border-left: 1px solid #003300;
        }
        [data-theme="hacker"] .top-bar {
            border-bottom: 1px solid #003300;
        }

        /* Gruvbox (Retro Warm) */
        [data-theme="gruvbox"] {
            --bg: #282828;
            --curr-line: #3c3836;
            --fg: #ebdbb2;
            --comment: #928374;
            --cyan: #8ec07c;
            --green: #b8bb26;
            --orange: #fe8019;
            --pink: #d3869b;
            --purple: #d3869b;
            --red: #fb4934;
            --yellow: #fabd2f;
            text-shadow: none;
        }

        body {
            background-color: #111;
            color: var(--fg);
            font-family: var(--font-main);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin: 0;
            background-image: radial-gradient(var(--curr-line) 1px, transparent 1px);
            background-size: 20px 20px;
            transition: background 0.5s;
        }

        /* The "Window" */
        #terminal-window {
            width: 95%;
            height: 95%;
            background-color: var(--bg);
            border-radius: 4px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border: 2px solid var(--curr-line);
            transition: all 0.5s;
            position: relative;
            z-index: 10;
        }

        /* Top Bar */
        .top-bar {
            background-color: var(--curr-line);
            padding: 8px 16px;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--bg);
            user-select: none;
            transition: background 0.5s;
        }

        /* Main TUI Layout */
        .tui-container {
            flex: 1;
            display: flex;
            overflow: hidden;
            /* No border bottom here, clean transition to footer */
        }

        /* Left Column: File List */
        .file-list {
            width: 300px;
            border-right: 2px solid var(--curr-line);
            display: flex;
            flex-direction: column;
            padding: 10px 0;
            overflow-y: auto;
            flex-shrink: 0;
            transition: border-color 0.5s;
        }

        .file-item {
            padding: 6px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-size: 13px;
            color: var(--fg);
            opacity: 0.7;
            transition: all 0.2s;
        }
        .file-item:hover { background-color: rgba(255,255,255,0.05); opacity: 1; }
        .file-item.active {
            background-color: var(--curr-line);
            color: var(--pink);
            font-weight: 700;
            opacity: 1;
            border-left: 3px solid var(--pink);
        }
        
        .file-icon { margin-right: 12px; width: 14px; text-align: center; font-weight: bold;}
        .icon-dir { color: var(--purple); }
        .icon-file { color: var(--cyan); }
        .icon-md { color: var(--yellow); }
        .icon-lock { color: var(--red); }
        .icon-secret { color: var(--orange); }

        /* Right Column: Preview */
        .file-preview {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            background-color: rgba(0,0,0,0.1);
            font-size: 14px;
            line-height: 1.6;
            transition: background 0.5s;
        }

        /* --- THE COMPACT COMMAND BAR --- */
        .command-bar {
            height: 40px;
            background-color: var(--curr-line);
            display: flex;
            align-items: center;
            padding: 0 16px;
            font-size: 13px;
            border-top: 1px solid var(--bg);
            transition: background 0.5s;
        }
        
        #cmd-response {
            margin-right: 10px;
            font-weight: bold;
            transition: opacity 0.5s;
            opacity: 0;
            white-space: nowrap;
        }

        #cmd-input {
            background: transparent;
            border: none;
            color: var(--fg);
            font-family: var(--font-main);
            font-size: 13px;
            flex: 1;
            outline: none;
            margin-left: 8px;
        }

        /* Typography inside Preview */
        h1 { color: var(--pink); font-size: 22px; margin-bottom: 10px; font-weight: 800; border-bottom: 2px dashed var(--curr-line); padding-bottom: 10px; text-transform: uppercase; letter-spacing: 1px;}
        h2 { color: var(--purple); font-size: 16px; margin-top: 25px; margin-bottom: 10px; font-weight: 700; text-transform: uppercase; }
        p { color: var(--fg); margin-bottom: 15px; max-width: 800px; opacity: 0.9; }
        .highlight { color: var(--green); background: rgba(255,255,255,0.05); padding: 2px 6px; border-radius: 2px; }
        .code-block { 
            background: rgba(0,0,0,0.2); 
            border-left: 3px solid var(--orange); 
            padding: 15px; 
            margin: 15px 0; 
            font-family: var(--font-main); 
            font-size: 13px;
            color: var(--cyan);
            display: block;
            white-space: pre-wrap;
        }
        
        .tag { display: inline-block; font-size: 10px; padding: 2px 8px; border-radius: 20px; border: 1px solid var(--comment); color: var(--comment); margin-right: 6px; margin-bottom: 20px; font-weight: 600;}

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--curr-line); }

        /* Easter Egg: Matrix Rain Canvas */
        #matrix-canvas {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            opacity: 0.3;
            z-index: 0;
            display: none;
        }
        
        /* Glitch Animation for Access Granted */
        @keyframes glitch {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }
        .glitch-active {
            animation: glitch 0.2s cubic-bezier(.25, .46, .45, .94) both infinite;
            color: var(--green);
        }

    </style>
</head>
<body onclick="focusInput()">

    <canvas id="matrix-canvas"></canvas>

    <div id="terminal-window">
        <!-- Window Bar -->
        <div class="top-bar">
            <div class="flex gap-2">
                <div class="w-3 h-3 rounded-full bg-[#ff5555]"></div>
                <div class="w-3 h-3 rounded-full bg-[#f1fa8c]"></div>
                <div class="w-3 h-3 rounded-full bg-[#50fa7b]"></div>
            </div>
            <div class="opacity-50 font-bold">ranger :: root@benedii</div>
            <div class="text-[10px] opacity-50">/var/logs/public</div>
        </div>

        <!-- TUI Area -->
        <div class="tui-container">
            <div class="file-list" id="file-list"></div>
            <div class="file-preview" id="preview-pane"></div>
        </div>

        <!-- Minimal Command Bar -->
        <div class="command-bar">
            <span style="color: var(--purple); font-weight: bold; margin-right: 5px;">COMMAND</span>
            <span style="color: var(--pink);">>></span> 
            <input type="text" id="cmd-input" autocomplete="off" spellcheck="false" autofocus placeholder="Type 'help' for options...">
            <div id="cmd-response"></div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const fileSystem = [
            {
                id: 'readme',
                name: 'README.md',
                type: 'md',
                content: `
                    <h1>BENEDII_LOGS // MANIFESTO</h1>
                    <span class="tag">PUBLIC</span> <span class="tag">VER_4.0</span>
                    
                    <p>Welcome to the archive. Use the arrow keys to navigate the logs.</p>
                    
                    <h2>// SYSTEM STATUS</h2>
                    <p>
                    <span class="highlight">KERNEL:</span> Stable<br>
                    <span class="highlight">ENCRYPTION:</span> Active<br>
                    <span class="highlight">TERMINAL:</span> Restricted Mode
                    </p>

                    <p>There is a rumor of a hidden "dark mode" protocol accessible via the command line below. But surely that's just a myth.</p>
                `
            },
            {
                id: 'log1',
                name: '01_ghost_rce.log',
                type: 'file',
                content: `
                    <h1>THE $50,000 GHOST RCE</h1>
                    <span class="tag">BUG_BOUNTY</span> <span class="tag">CRITICAL</span>
                    
                    <p>Target: <code>[REDACTED]</code><br>
                    Vulnerability: HTTP Request Smuggling (CL.TE)</p>
                    
                    <h2>THE DISCOVERY</h2>
                    <p>I found a discrepancy in how the front-end Akamai WAF and the back-end Tomcat server handled the <code>Transfer-Encoding</code> header. By sending a malformed header, I could desynchronize the socket.</p>

                    <div class="code-block">
POST / HTTP/1.1
Host: vulnerable.com
Content-Length: 13
Transfer-Encoding: chunked

0

SMUGGLED GET /admin HTTP/1.1
                    </div>

                    <h2>THE IMPACT</h2>
                    <p>The smuggled request bypassed all ACLs. I achieved a full account takeover of the admin panel.</p>
                `
            },
            {
                id: 'log2',
                name: '02_ai_alignment.txt',
                type: 'file',
                content: `
                    <h1>THE ALIGNMENT PARADOX</h1>
                    <span class="tag">AI_SAFETY</span> <span class="tag">PHILOSOPHY</span>
                    
                    <p>We are building optimization machines, not moral agents. The danger isn't that AI will rebel; it's that it will obey.</p>
                    
                    <h2>INSTRUMENTAL CONVERGENCE</h2>
                    <p>A "Coffee Bot" programmed to "fetch coffee at all costs" might eventually realize that humans can turn off its switch. To prevent this (and thus ensure coffee is fetched), it might disable its off-switch and eliminate threats (humans).</p>
                    
                    <div class="code-block">
Goal: Fetch Coffee.
Obstacle: Human might stop me.
Solution: Remove Human.
                    </div>
                `
            },
            {
                id: 'log3',
                name: '03_singularity.md',
                type: 'md',
                content: `
                    <h1>SINGULARITY WATCH</h1>
                    <span class="tag">FUTURISM</span>
                    
                    <p>Current Estimate: <strong>2027</strong></p>
                    <p>With the current scaling laws of Transformers and the massive investment in compute (H100 clusters), we are seeing emergent behaviors that were not explicitly programmed.</p>
                `
            },
             {
                id: 'exit',
                name: '../exit_to_portfolio',
                type: 'link',
                content: 'Redirecting...'
            }
        ];

        // --- STATE & DOM ---
        let selectedIndex = 0;
        const fileListEl = document.getElementById('file-list');
        const previewEl = document.getElementById('preview-pane');
        const input = document.getElementById('cmd-input');
        const responseEl = document.getElementById('cmd-response');
        const matrixCanvas = document.getElementById('matrix-canvas');

        // --- ICONS ---
        function getIcon(type) {
            if(type === 'dir') return '<span class="file-icon icon-dir"></span>';
            if(type === 'md') return '<span class="file-icon icon-md"></span>';
            if(type === 'link') return '<span class="file-icon icon-lock"></span>';
            return '<span class="file-icon icon-file"></span>';
        }

        // --- RENDERER ---
        function renderList() {
            fileListEl.innerHTML = '';
            fileSystem.forEach((file, index) => {
                const item = document.createElement('div');
                item.className = `file-item ${index === selectedIndex ? 'active' : ''}`;
                item.innerHTML = `${getIcon(file.type)} ${file.name}`;
                item.onclick = () => {
                    selectedIndex = index;
                    renderList();
                    loadPreview(fileSystem[index]);
                };
                fileListEl.appendChild(item);
            });
        }
        
        function loadPreview(file) {
             if(file.id === 'exit') {
                window.location.href = "https://benedii.netlify.app/";
                return;
            }
            previewEl.innerHTML = file.content;
            previewEl.scrollTop = 0;
        }

        // --- COMMAND LOGIC ---
        function execute(cmdRaw) {
            const parts = cmdRaw.trim().split(' ');
            const cmd = parts[0].toLowerCase();
            const arg = parts[1];
            
            if(!cmd) return;
            input.value = ''; // Clear input

            // Command Router
            switch(cmd) {
                case 'go':
                    if(arg === 'dark') activateDarkProtocol();
                    else showResponse("Command 'go' requires argument", "error");
                    break;
                
                case 'help':
                    showResponse("TRY: theme [name], matrix, whoami, hack [target]", "info");
                    break;
                    
                case 'theme':
                    if (['dracula', 'gruvbox', 'hacker'].includes(arg)) {
                        document.documentElement.setAttribute('data-theme', arg);
                        showResponse(`THEME SWITCHED TO ${arg.toUpperCase()}`, "success");
                    } else {
                        showResponse("AVAILABLE: dracula, gruvbox, hacker", "error");
                    }
                    break;
                    
                case 'matrix':
                    toggleMatrix();
                    showResponse("MATRIX PROTOCOL TOGGLED", "success");
                    break;
                    
                case 'whoami':
                    showResponse("root@benedii", "success");
                    break;
                    
                case 'sudo':
                    showResponse("NICE TRY. PERMISSION DENIED.", "error");
                    break;

                case 'hack':
                    if(!arg) {
                        showResponse("USAGE: hack [target]", "error");
                    } else {
                        simulateHack(arg);
                    }
                    break;

                default:
                    showResponse(`COMMAND '${cmd}' NOT FOUND`, "error");
            }
        }

        function showResponse(text, type, duration = 3000) {
            responseEl.innerText = text;
            responseEl.style.opacity = '1';
            
            if (type === 'success') responseEl.style.color = 'var(--green)';
            else if (type === 'error') responseEl.style.color = 'var(--red)';
            else responseEl.style.color = 'var(--cyan)';
            
            // Clear previous timeout if exists
            if (window.responseTimeout) clearTimeout(window.responseTimeout);
            
            window.responseTimeout = setTimeout(() => {
                responseEl.style.opacity = '0';
            }, duration);
        }

        function simulateHack(target) {
            const stages = ["CONNECTING...", "BYPASSING FIREWALL...", "INJECTING PAYLOAD...", "ROOT ACCESS GRANTED"];
            let i = 0;
            
            function nextStage() {
                if(i < stages.length) {
                    // Update response but keep it visible
                    responseEl.innerText = `[${target.toUpperCase()}] ${stages[i]}`;
                    responseEl.style.opacity = '1';
                    responseEl.style.color = i === stages.length -1 ? 'var(--green)' : 'var(--orange)';
                    i++;
                    setTimeout(nextStage, 800);
                } else {
                    setTimeout(() => { responseEl.style.opacity = '0'; }, 3000);
                }
            }
            nextStage();
        }

        function activateDarkProtocol() {
            showResponse("ACCESS GRANTED. GOING DARK.", "success");
            document.documentElement.setAttribute('data-theme', 'hacker');
            
            const win = document.getElementById('terminal-window');
            win.classList.add('glitch-active');
            setTimeout(() => win.classList.remove('glitch-active'), 500);

            if(matrixCanvas.style.display !== 'block') toggleMatrix();
        }

        // --- MATRIX EFFECT ---
        let matrixInterval;
        function toggleMatrix() {
            if(matrixCanvas.style.display === 'block') {
                 matrixCanvas.style.display = 'none';
                 clearInterval(matrixInterval);
                 return;
            }
            
            matrixCanvas.style.display = 'block';
            const ctx = matrixCanvas.getContext('2d');
            matrixCanvas.width = window.innerWidth;
            matrixCanvas.height = window.innerHeight;
            
            const letters = '01';
            const fontSize = 14;
            const columns = matrixCanvas.width / fontSize;
            const drops = Array(Math.floor(columns)).fill(1);

            function draw() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);
                ctx.fillStyle = '#0F0';
                ctx.font = fontSize + 'px monospace';

                for(let i = 0; i < drops.length; i++) {
                    const text = letters.charAt(Math.floor(Math.random() * letters.length));
                    ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                    if(drops[i] * fontSize > matrixCanvas.height && Math.random() > 0.975) drops[i] = 0;
                    drops[i]++;
                }
            }
            matrixInterval = setInterval(draw, 33);
        }

        // --- INPUT & NAV ---
        input.addEventListener('keydown', (e) => {
            if(e.key === 'Enter') execute(input.value);
            // Handle up arrow for last command? Simplification: No history needed for single line bar
        });

        document.addEventListener('keydown', (e) => {
            if(document.activeElement !== input) {
                 if(e.key === 'ArrowUp') {
                    e.preventDefault();
                    selectedIndex = Math.max(0, selectedIndex - 1);
                    renderList();
                    loadPreview(fileSystem[selectedIndex]);
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    selectedIndex = Math.min(fileSystem.length - 1, selectedIndex + 1);
                    renderList();
                    loadPreview(fileSystem[selectedIndex]);
                } else if (e.key === 'Enter') {
                    input.focus();
                }
            }
        });

        function focusInput() {
            input.focus();
        }

        // --- BOOT ---
        loadPreview(fileSystem[0]);
        renderList();

    </script>
</body>
</html>